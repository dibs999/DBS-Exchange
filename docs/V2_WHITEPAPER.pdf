%PDF-1.4
1 0 obj
<< /Type /Catalog /Pages 2 0 R >>
endobj
2 0 obj
<< /Type /Pages /Kids [5 0 R 7 0 R 9 0 R] /Count 3 >>
endobj
3 0 obj
<< /Type /Font /Subtype /Type1 /BaseFont /Courier >>
endobj
4 0 obj
<< /Length 2603 >>
stream
BT
/F1 11 Tf
14 TL
54 777 Td
(OBSIDIAN DRIFT V2 – TECHNISCHES WHITEPAPER \(ENTWURF\)) Tj
T*
() Tj
T*
(> Ziel: Hybrid Perps DEX auf Base, mit on-chain Matching \(Continuous +) Tj
T*
(Batch Auction\), Cross-Margin-Engine, Vault/Insurance-Backstop und) Tj
T*
(upgradebarem Stack. V1 bleibt als Legacy-Pfad \(Sepolia\), V2 ist Standard.) Tj
T*
() Tj
T*
(1. MOTIVATION & ZIELE) Tj
T*
(- MEV-minimiertes, faireres Matching durch Hybrid-Modell \(Continuous +) Tj
T*
(periodische Auctions\).) Tj
T*
(- Strenge Risiko-Kontrollen: Cross-Margin, OI-/Exposure-Caps, Funding,) Tj
T*
(Partial Liquidations.) Tj
T*
(- Kapital-Effizienz und Resilienz: LP-Vault + Insurance Fund als Residual) Tj
T*
(Counterparty und Backstop.) Tj
T*
(- Sicherheit & Upgradeability: UUPS + Timelock \(später\), modulare Oracles) Tj
T*
(\(Router\), audits-once patterns.) Tj
T*
(- Deployment-Fokus: Base \(8453\) als primäre Chain; V1 bleibt auf Sepolia) Tj
T*
(als Untermenü.) Tj
T*
() Tj
T*
(2. SYSTEMÜBERSICHT) Tj
T*
(- **OrderbookV2 \(UUPS\)**: Tick-basierte Price-Time-Priority, Continuous) Tj
T*
(Matching, Batch Auction mit Clearing-Preis, optionale) Tj
T*
(Vault-Residual-Fills, Stop-Trigger via Keeper.) Tj
T*
(- **PerpEngineV2 \(UUPS\)**: Cross-Margin, Funding, Liquidation \(partial\),) Tj
T*
(OI-/Exposure-Caps, Maker/Taker-Gebühren-Split \(Vault/Insurance/Treasury\),) Tj
T*
(ADL-Flag.) Tj
T*
(- **OracleRouter \(UUPS\)**: Multi-Source Aggregation, MaxAge/MaxDeviation,) Tj
T*
(optional TWAP.) Tj
T*
(- **Vault \(UUPS, ERC20 Shares\)**: USDC \(6d\) Ein-/Auszahlung, optional) Tj
T*
(Engine-Allocation.) Tj
T*
(- **InsuranceFund \(UUPS\)**: USDC Treasury, optional Engine-Allocation,) Tj
T*
(Backstop für Defizite.) Tj
T*
(- **Keepers**: Auction-Executor, Stop-Trigger, Funding-Updater,) Tj
T*
(Liquidation, Oracle-Updater.) Tj
T*
(- **Indexer/WS/API**: Dual-Stack V1/V2 Endpoints; V2 als) Tj
T*
(Standarddatenquelle.) Tj
T*
() Tj
T*
(3. TOKEN & COLLATERAL) Tj
T*
(- Collateral: USDC \(6 decimals\). Intern 1e18-Skalierung \(SCALE = 1e12\).) Tj
T*
(- Keine Governance-Token im MVP; Fees fließen anteilig an) Tj
T*
(Vault/Insurance/Treasury \(config\).) Tj
T*
() Tj
T*
(4. MATCHING & AUKTIONEN) Tj
T*
() Tj
T*
(CONTINUOUS) Tj
T*
(- Best-Bid/Best-Ask Tick-Listen, FIFO in Level.) Tj
T*
(- Taker sweept gegen beste Gegenseite; Limit-Checks, Stop-Trigger) Tj
T*
(\(Keeper\) möglich.) Tj
T*
(- Gebühren: Maker/Taker Bps \(konfigurierbar, gedeckelt BPS=10_000\).) Tj
T*
() Tj
T*
(BATCH AUCTION) Tj
T*
(- Eligible Orders \(Queued\) ? Clearing-Preis = Preis mit max. matched) Tj
T*
(Volumen; Tiebreak: Nähe zum Oracle-Preis.) Tj
T*
ET
endstream
endobj
5 0 obj
<< /Type /Page /Parent 2 0 R /MediaBox [0 0 595 842] /Contents 4 0 R /Resources << /Font << /F1 3 0 R >> >> >>
endobj
6 0 obj
<< /Length 2817 >>
stream
BT
/F1 11 Tf
14 TL
54 777 Td
(- Residual-Imbalance optional vom Vault gefüllt \(wenn aktiviert\).) Tj
T*
(- Cooldown `auctionInterval`, Limit `maxAuctionOrders` pro Run.) Tj
T*
() Tj
T*
(5. RISK ENGINE \(PERPENGINEV2\)) Tj
T*
(- Cross-Margin, 1 Collateral \(USDC\), Position pro Market.) Tj
T*
(- Limits: `initialMarginBps`, `maintenanceMarginBps`, `maxLeverage`,) Tj
T*
(`maxOpenInterest`, `maxAccountExposure`.) Tj
T*
(- Funding: `fundingRatePerSecond`, `cumulativeFundingRate`; Keeper setzt) Tj
T*
(Rate \(Imbalance-basiert\).) Tj
T*
(- Liquidation: Partial close, Penalty \(feeBps\) an Liquidator; Defizit ?) Tj
T*
(Insurance ? BadDebt/ADL-Flag.) Tj
T*
(- Fees: Maker/Taker-Anteil ? Vault/Insurance/Treasury \(konfigurierbare) Tj
T*
(Shares, Summe = 100%\).) Tj
T*
() Tj
T*
(6. ORACLE-DESIGN) Tj
T*
(- Router aggregiert mehrere Quellen \(Pull-Modell\); MaxAge/Deviation je) Tj
T*
(Market; TWAP optional.) Tj
T*
(- Keeper ruft `updatePrice` periodisch auf Basis externer Feeds.) Tj
T*
(- Engine validiert Freshness via `maxPriceAge`.) Tj
T*
() Tj
T*
(7. VAULT & INSURANCE) Tj
T*
(- Vault: ERC20 Shares, `totalAssets` = Wallet + Engine-Allocation) Tj
T*
(\(scaled\). Share-Mint/Burn ~ ERC4626-ähnlich, aber minimal gehalten.) Tj
T*
(- Insurance Fund: Custodies Fees/Top-ups, kann in Engine allokieren.) Tj
T*
(- Residual-Auction-Fill: Vault kann gegensätzliche Seite bei Clearing) Tj
T*
(füllen \(optional, konservativ kapseln\).) Tj
T*
() Tj
T*
(8. UPGRADEABILITY & GOVERNANCE) Tj
T*
(- UUPS + Ownable \(MVP\); Timelock/Gnosis Safe empfohlen vor Mainnet.) Tj
T*
(- Upgrade-Scope: Router/Orderbook/Engine/Vault/Insurance separat.) Tj
T*
(- Kill/Pause Hooks: Pausable in kritischen Contracts \(Owner\).) Tj
T*
() Tj
T*
(9. SICHERHEITSPRINZIPIEN) Tj
T*
(- ReentrancyGuard, Input-Validierungen \(tickSize, min/max size, caps\).) Tj
T*
(- Price Staleness/Deviation Checks über OracleRouter + Engine.) Tj
T*
(- Fee-Caps \(BPS\), Exposure-/OI-Caps, Maintenance/Initial Margin Checks.) Tj
T*
(- BadDebt surfacing + ADL-Flag \(Implementierung ausstehend\).) Tj
T*
(- Tests: Unit + Invariants \(Margin Safety, Fee Conservation, OI Caps, No) Tj
T*
(Stuck Orders\), Fuzz auf Matching/Funding/Liq.) Tj
T*
() Tj
T*
(10. BACKEND/INDEXER/KEEPERS \(ZIELBILD\)) Tj
T*
(- DB-Schema: V2-Events \(OrderPlaced/Matched/AuctionExecuted,) Tj
T*
(FundingRateUpdated, LiquidationExecuted, Fees/Vault\).) Tj
T*
(- Indexer: Base RPC, Restart-Safety, Batch-Logs, Dual-Stack V1/V2.) Tj
T*
(- Keepers:) Tj
T*
(  - Auction Executor \(batch\),) Tj
T*
(  - Stop Trigger \(preisbasierte Aktivierung\),) Tj
T*
(  - Funding Updater \(Imbalance-Berechnung + setFundingRate\),) Tj
T*
(  - Liquidation,) Tj
T*
(  - Oracle Updater \(Router sources\).) Tj
T*
(- API/WS: `/v2/*` als Standard; `/v1/*` für Legacy. Live-Streams aus) Tj
T*
(V2-Events.) Tj
T*
ET
endstream
endobj
7 0 obj
<< /Type /Page /Parent 2 0 R /MediaBox [0 0 595 842] /Contents 6 0 R /Resources << /Font << /F1 3 0 R >> >> >>
endobj
8 0 obj
<< /Length 1872 >>
stream
BT
/F1 11 Tf
14 TL
54 777 Td
() Tj
T*
(11. FRONTEND \(ZIELBILD\)) Tj
T*
(- Netzwerk: Base \(8453\) für V2; Legacy-Tab für V1 \(Sepolia\).) Tj
T*
(- Order Entry: Market/Limit/Stop, Continuous/Auction Toggle, Slippage,) Tj
T*
(Fees \(Maker/Taker\) sichtbar, Operator-Approvals falls nötig.) Tj
T*
(- Orderbook/Trades: Live WS, Spread/Tick-Bands, Auction-Countdown/Result.) Tj
T*
(- Positions: Margin/Funding/PnL aus V2, Liq-Preis auf Basis) Tj
T*
(Contract-Params, Health-Bar.) Tj
T*
(- Vault UI: echte USDC-Ein/Auszahlung, Shares, Fee-Yield, ggf. Claim.) Tj
T*
(- Settings: Switch V1/V2, Netzwerk-Hinweise, Sprache \(DE/EN\).) Tj
T*
() Tj
T*
(12. DEPLOYMENT & OPS \(BASE\)) Tj
T*
(- Hardhat: Base-Netzwerk, Proxy-Deploy \(UUPS\) für) Tj
T*
(Router/Orderbook/Engine/Vault/Insurance.) Tj
T*
(- Konfig: Market-Setup \(tickSize, margins, caps\), Fee-Shares,) Tj
T*
(Auction-Interval, Router-Sources.) Tj
T*
(- ENV: V2-spezifische Adressen, Keeper Keys, RPC, CORS.) Tj
T*
(- Rollout: Deploy ? Wire Router ? Seed Price ? Create Market ? Set Fees ?) Tj
T*
(Start Keepers ? Smoke Tests.) Tj
T*
() Tj
T*
(13. OFFENE ARBEITSSCHRITTE \(UMSETZUNG\)) Tj
T*
(- PerpEngineV2: ADL/Defizit-Flow finalisieren, Funding-Calc \(Imbalance\),) Tj
T*
(Events, Operator/Access.) Tj
T*
(- OrderbookV2: Level-Bookkeeping, Vault-Residual-Guards, Fee-Caps,) Tj
T*
(Trigger-Keeper.) Tj
T*
(- OracleRouter: Source-Adapter + Admin-Flow; TWAP/Deviation Tests.) Tj
T*
(- Vault/Insurance: Rounding/Pause/Limit-Guards.) Tj
T*
(- Tests: Unit + Invariant + Integration \(Keeper/Indexer\).) Tj
T*
(- Backend/Frontend: Dual-Stack, Mocks raus, Base-Wiring.) Tj
T*
(- Deploy-Skripte & Docs \(Base\), ENV-Beispiele.) Tj
T*
() Tj
T*
(14. LEGACY \(V1\)) Tj
T*
(- V1 bleibt deploybar \(Sepolia\), im Frontend als Legacy/Untermenü.) Tj
T*
(- Backend darf V1 weiterhin bedienen, V2 ist Default-Ansicht und -API.) Tj
T*
ET
endstream
endobj
9 0 obj
<< /Type /Page /Parent 2 0 R /MediaBox [0 0 595 842] /Contents 8 0 R /Resources << /Font << /F1 3 0 R >> >> >>
endobj
xref
0 10
0000000000 65535 f 
0000000009 00000 n 
0000000058 00000 n 
0000000127 00000 n 
0000000195 00000 n 
0000002850 00000 n 
0000002976 00000 n 
0000005845 00000 n 
0000005971 00000 n 
0000007895 00000 n 
trailer
<< /Size 10 /Root 1 0 R >>
startxref
8021
%%EOF
